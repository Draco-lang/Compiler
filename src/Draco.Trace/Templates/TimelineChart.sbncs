<!DOCTYPE html>
<html>
<body>

{{func render_message(message)}}
    <rect
        x="{{message.AbsoluteStartPercentage * 100}}%"
        y="{{message.Height * 30}}px"
        width="{{message.AbsoluteSpanPercentage * 100}}%"
        height="30px"
        rx="5"
        ry="5"
        fill="hsl({{120 - 120 * message.RelativeSpanPercentage}}, 100%, 50%)" />
    <text
        x="{{(message.AbsoluteStartPercentage + message.AbsoluteSpanPercentage / 2) * 100}}%"
        y="{{message.Height * 30 + 15}}px"
        dominant-baseline="middle"
        text-anchor="middle"
        fill="white">
        {{message.Message}}
    </text>
    {{for $child in message.Children}}
        {{render_message($child)}}
    {{end}}
{{end}}

<svg height="1280" width="720" xmlns="http://www.w3.org/2000/svg">
    {{for $thread in Threads}}
        {{for $message in $thread.Messages}}
            {{render_message($message)}}
        {{end}}
    {{end}}
</svg>

</body>
</html>
